/**
 * Javascript for print event.
 *
 * @module    quiz_answersheets/print
 * @copyright 2019 The Open University
 * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("quiz_answersheets/print",["jquery","core/ajax","core/notification"],(function($,Ajax,Notification){var t={mconfig:null,SELECTOR:{PAGE_HEADER:".attempt-sheet-header-gecko",PAGE_CONTAINER:"#page",QTYPE_ORDERING_VERTICAL_SORTABLE_LIST:".que.ordering ul.sortablelist.vertical li",QTYPE_ORDERING_HORIZONTAL_SORTABLE_LIST:".que.ordering ul.sortablelist.horizontal li",QTYPE_ORDERING_MARGIN:".orderingmargin"},TEMPLATE:{QTYPE_ORDERING_MARGIN:'<div class="orderingmargin"></div>',QTYPE_ORDERING_WRAPPER:'<div class="orderingwrapper"></div>'},pageHeaderHeight:0,pageContainer:null,pageHeader:null,init:function(options){t.mconfig=options,t.pageHeader=$(t.SELECTOR.PAGE_HEADER),t.pageContainer=$(t.SELECTOR.PAGE_CONTAINER),t.pageHeaderHeight=t.pageHeader.height(),t.pageHeader.css("top",-Math.abs(t.pageHeaderHeight)),t.pageContainer.css("margin-top",t.pageHeaderHeight),window.addEventListener("beforeprint",t.handlePrintStart),window.addEventListener("afterprint",t.handlePrintStop)},handlePrintStart:function(e){e.preventDefault(),t.pageContainer.css("margin-top",0),Y.UA.gecko&&(t.pageContainer.css("padding-top",t.pageHeaderHeight+30),t.pageHeader.css("top",0)),t.handlePrintForOrdering(!0),Ajax.call([{methodname:"quiz_answersheets_create_event",args:{attemptid:t.mconfig.attemptid,userid:t.mconfig.userid,courseid:t.mconfig.courseid,cmid:t.mconfig.cmid,quizid:t.mconfig.quizid,pagetype:t.mconfig.pagetype}}])[0].then((function(){return!0})).fail((function(err){Notification.exception(err)}))},handlePrintStop:function(e){return e.preventDefault(),t.pageContainer.css("margin-top",t.pageHeaderHeight),Y.UA.gecko&&(t.pageContainer.css("padding-top",0),t.pageHeader.css("top",-Math.abs(t.pageHeaderHeight))),t.handlePrintForOrdering(!1),!0},handlePrintForOrdering:function(isPrinting){var sortablesVertical=$(t.SELECTOR.QTYPE_ORDERING_VERTICAL_SORTABLE_LIST),sortablesHorizontal=$(t.SELECTOR.QTYPE_ORDERING_HORIZONTAL_SORTABLE_LIST);(sortablesVertical.length||sortablesHorizontal.length)&&(isPrinting?(sortablesVertical.each((function(i,nodeSortableVertical){var marginEle=$(t.TEMPLATE.QTYPE_ORDERING_MARGIN);$(nodeSortableVertical).before(marginEle),$(nodeSortableVertical).after(marginEle)})),sortablesHorizontal.each((function(i,nodeSortableHorizontal){var marginEle=$(t.TEMPLATE.QTYPE_ORDERING_MARGIN);marginEle.addClass("horizontal"),$(nodeSortableHorizontal).after(marginEle),$(nodeSortableHorizontal).wrap(t.TEMPLATE.QTYPE_ORDERING_WRAPPER)}))):($(t.SELECTOR.QTYPE_ORDERING_MARGIN).remove(),sortablesHorizontal.length&&sortablesHorizontal.each((function(i,nodeSortableHorizontal){$(nodeSortableHorizontal).unwrap()}))))}};return t}));

//# sourceMappingURL=print.min.js.map